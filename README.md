## bayesapi

Some initial work towards a more formal API for the Bayes stack.

This uses OpenAPI to specify its API, to build documentation, and to validate request parameters. The API is specified in `api.yaml`.

### running

Copy the example config file to `config.yaml`, and adjust according to your environment.

`bayesapi` uses Docker to manage its environment. Start it with

    docker-compose up

Point your favorite REST client to `http://localhost:5000/`:

    curl --request POST \
     --url http://localhost:5000/find-peers \
     --header 'content-type: application/json' \
     --data '{
	   "context-column": "operator_owner",
	   "target-row": 10
    }'

### development

The docker container mounts and runs out of this directory, and the server is configured to watch for source file changes, so your changes will generally be immediately visibile in the running container.

The container will crash on some bad syntax errors. Simply restart it in those instances.

You'll need to rebuild your Docker container if you change requirements.

### documentation

Docs are autogenerated from the API spec. We're using [ReDoc](https://github.com/Rebilly/ReDoc/blob/master/cli/README.md) to do just that.

To rebuild docs, you'll need to install redoc-cli first:

    npm install -g redoc-cli

Then you can rebuild documentation with:

    redoc-cli bundle -o docs/index.html api.yaml
